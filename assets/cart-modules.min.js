if(document.querySelector(".cart-wrapper .drawer__module--timer")){const e=document.querySelector(".cart-wrapper .drawer__module--timer-time"),t=document.querySelector(".cart-wrapper .drawer__module--timer");let r;localStorage.getItem("storyThemeDrawerTimer")?r=localStorage.getItem("storyThemeDrawerTimer"):(r=60*t.dataset.duration,localStorage.setItem("storyThemeDrawerTimer",r));const o=()=>{const t=Math.floor(r/60),o=r%60;if(e.textContent=`${t}:${o.toString().padStart(2,"0")}`,r>0)localStorage.setItem("storyThemeDrawerTimer",r--);else{const e=new XMLHttpRequest;e.open("POST","/cart/clear.js",!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4===e.readyState&&200===e.status&&(localStorage.removeItem("storyThemeDrawerTimer"),window.location.reload())},e.send()}};o(),setInterval((()=>{o()}),1e3)}if(document.querySelector("#cartDiscountCodeButton")&&document.getElementById("cartDiscountCodeButton").addEventListener("click",(function(e){e.preventDefault();var t,r,o="/checkout?discount="+document.getElementById("cartDiscountCode").value;window.location.href=o})),document.querySelector(".drawer__module--free_shipping")){const e=document.querySelector(".free-shipping__left-amount"),t=document.querySelector(".free-shipping__success"),r=document.querySelector(".free-shipping__amount"),o=document.querySelector(".free-shipping__drag"),a=+r.dataset.totalPrice/100,c=document.querySelector(".drawer__module--free_shipping").dataset.target,n=new Intl.NumberFormat(document.body.dataset.shopLocale,{style:"currency",currency:document.body.dataset.shopCurrency}).format(c-a);c-a>0?(r.textContent=n,e.classList.remove("hidden"),t.classList.add("hidden"),o.style.width=100*a/c+"%"):(t.classList.remove("hidden"),e.classList.add("hidden"),o.style.width="100%")}if(document.querySelector("#drawer-trust__swiper")){const e=new Swiper("#drawer-trust__swiper",{autoplay:{delay:1e3},loop:!0})}document.querySelector("#cart-upsell__swiper")&&new Swiper("#cart-upsell__swiper",{slidesPerView:1.2,spaceBetween:10,autoHeight:!0});