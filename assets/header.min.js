class StickyHeader extends HTMLElement{connectedCallback(){this.header=document.querySelector(".section-header"),this.headerIsAlwaysSticky="always"===this.getAttribute("data-sticky-type")||"reduce-logo-size"===this.getAttribute("data-sticky-type"),this.headerBounds={},this.initializeHeaderPosition(),this.logo=document.querySelector(".header__heading-logo"),this.headerContent=document.querySelector(".header"),this.setHeaderHeight(),window.matchMedia("(max-width: 990px)").addEventListener("change",this.setHeaderHeight.bind(this)),this.headerIsAlwaysSticky&&this.header.classList.add("shopify-section-header-sticky"),this.currentScrollTop=0,this.preventReveal=!1,this.predictiveSearch=this.querySelector("predictive-search"),this.onScrollHandler=this.onScroll.bind(this),this.hideHeaderOnScrollUp=()=>this.preventReveal=!0,this.addEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),window.addEventListener("scroll",this.onScrollHandler,!1),this.createObserver()}initializeHeaderPosition(){const e=getComputedStyle(document.documentElement).getPropertyValue("--announcement-height");e?this.header.style.top=e:console.error("Announcement height not set or invalid.")}setHeaderHeight(){document.documentElement.style.setProperty("--header-height",`${this.header.offsetHeight+1}px`)}updateHeaderHeight(){if(this.headerContent){const e=this.headerContent.offsetHeight+1+"px";document.documentElement.style.setProperty("--header-height",e)}}disconnectedCallback(){this.removeEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),window.removeEventListener("scroll",this.onScrollHandler)}createObserver(){let e;new IntersectionObserver(((e,t)=>{this.headerBounds=e[0].intersectionRect,t.disconnect()})).observe(this.header)}onScroll(){document.body.classList.add("header-sticky");const e=document.documentElement.scrollTop;if(!this.predictiveSearch||!this.predictiveSearch.isOpen){if(e>this.currentScrollTop&&e>this.headerBounds.bottom){if(this.header.classList.add("scrolled-past-header"),this.preventHide)return;requestAnimationFrame(this.hide.bind(this))}else e<this.currentScrollTop&&e>this.headerBounds.bottom?(this.header.classList.add("scrolled-past-header"),this.preventReveal?(window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout((()=>{this.preventReveal=!1}),66),requestAnimationFrame(this.hide.bind(this))):requestAnimationFrame(this.reveal.bind(this))):e<=this.headerBounds.top&&(this.header.classList.remove("scrolled-past-header"),requestAnimationFrame(this.reset.bind(this)));this.currentScrollTop=e}}hide(){"reduce-logo-size"===this.getAttribute("data-sticky-type")&&(this.logo.classList.add("header__logo--small"),this.headerContent.classList.add("header__padding--small"),this.updateHeaderHeight()),this.headerIsAlwaysSticky||(this.header.classList.add("shopify-section-header-hidden","shopify-section-header-sticky"),document.body.classList.add("header-hidden","header-sticky"),this.closeMenuDisclosure(),this.closeSearchModal(),this.header.style.top="")}reveal(){"reduce-logo-size"===this.getAttribute("data-sticky-type")&&(this.logo.classList.add("header__logo--small"),this.headerContent.classList.add("header__padding--small"),this.updateHeaderHeight()),this.header.classList.add("shopify-section-header-sticky","animate"),this.header.classList.remove("shopify-section-header-hidden"),document.body.classList.remove("header-hidden");const e=getComputedStyle(document.documentElement).getPropertyValue("--announcement-height");this.header.style.top=e}reset(){"reduce-logo-size"===this.getAttribute("data-sticky-type")&&(this.logo.classList.remove("header__logo--small"),this.headerContent.classList.remove("header__padding--small")),this.header.classList.remove("shopify-section-header-hidden","shopify-section-header-sticky","animate"),document.body.classList.remove("header-hidden","header-sticky");const e=getComputedStyle(document.documentElement).getPropertyValue("--announcement-height");this.header.style.top=e,this.updateHeaderHeight(),setTimeout((()=>{this.updateHeaderHeight()}),250)}closeMenuDisclosure(){this.disclosures=this.disclosures||this.header.querySelectorAll("header-menu"),this.disclosures.forEach((e=>e.close()))}closeSearchModal(){this.searchModal=this.searchModal||this.header.querySelector("details-modal"),this.searchModal&&this.searchModal.close(!1)}}customElements.define("sticky-header",StickyHeader);