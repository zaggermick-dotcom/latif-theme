{{ 'component-cart.css' | asset_url | stylesheet_tag }}
{{ 'component-cart-items.css' | asset_url | stylesheet_tag }}
{{ 'component-totals.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}
{{ 'component-discounts.css' | asset_url | stylesheet_tag }}
{{ 'component-loading-overlay.css' | asset_url | stylesheet_tag }}

{%- style -%}
  :root {
    --cart-modules-border:
      {%- if section.settings.cart_modules_border == "border--1" -%}var(--border-1)
      {%- elsif section.settings.cart_modules_border == "border--2" -%}var(--border-2)
      {%- elsif section.settings.cart_modules_border == "border--3" -%}var(--border-3)
      {%- else -%}none{%- endif -%};
  }

  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top_sm }}px;
    padding-bottom: {{ section.settings.padding_bottom_sm }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  /* üéØ STRUCTURE POUR TOTAUX FIXES EN BAS */
  .cart-page-container {
    display: flex;
    flex-direction: column;
    min-height: calc(100vh - 200px);
    position: relative;
  }

  .cart-wrapper {
    display: flex;
    flex-direction: column;
    gap: 30px;
    flex: 1;
    margin-bottom: 20px;
  }

  @media screen and (min-width: 990px) {
    .cart-wrapper {
      flex-direction: row;
      align-items: flex-start;
    }
    
    .cart-items {
      flex: 1;
      max-width: calc(70% - 15px);
    }
    
    .cart-flex__right {
      flex: 0 0 30%;
      max-width: 30%;
      position: sticky;
      top: 20px;
    }
  }

  /* üì± TOTAUX FIXES EN BAS SUR MOBILE */
  @media screen and (max-width: 989px) {
    .cart-flex__right {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--color-background);
      z-index: 100;
      padding: 20px;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.1);
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      transform: translateY(0);
      transition: transform 0.3s ease;
    }
    
    .cart-flex__right.hidden {
      transform: translateY(100%);
    }
    
    /* Espace pour √©viter que le contenu soit cach√© par les totaux */
    .cart-items {
      padding-bottom: 300px;
    }
    
    /* Ajuster le scroll */
    html, body {
      overflow-x: hidden;
      position: relative;
    }
  }

  /* üé® STYLE DES TOTAUX */
  .cart-modules.content-container {
    background: var(--color-background);
    border: var(--cart-modules-border);
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
  }

  .totals {
    margin-bottom: 16px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  }

  .totals:last-of-type {
    border-bottom: none;
    margin-bottom: 24px;
  }

  .totals__subtotal {
    font-size: 16px;
    color: rgba(0, 0, 0, 0.7);
    margin-bottom: 4px;
  }

  .totals__subtotal.totals__little {
    font-size: 14px;
  }

  .totals__subtotal-value {
    font-size: 18px;
    font-weight: 600;
    color: #000;
  }

  .cart__checkout-button {
    width: 100%;
    padding: 16px;
    font-size: 16px;
    font-weight: 600;
    margin-top: 20px;
  }

  /* üö´ EMP√äCHER LE D√âFILEMENT DE L'ARRI√àRE-PLAN */
  body.cart-totals-visible {
    overflow: hidden;
    height: 100vh;
    position: fixed;
    width: 100%;
  }

  /* üìú SCROLL SMOOTH POUR LES ARTICLES */
  .cart-items {
    overflow-y: auto;
    max-height: calc(100vh - 300px);
  }

  /* üì± OPTIMISATIONS MOBILE */
  @media screen and (max-width: 749px) {
    .cart-flex__right {
      padding: 16px;
    }
    
    .cart-modules.content-container {
      padding: 20px;
    }
    
    .cart-items {
      padding-bottom: 280px;
    }
  }

  @media screen and (max-width: 480px) {
    .cart-flex__right {
      padding: 12px;
    }
    
    .cart-modules.content-container {
      padding: 16px;
    }
    
    .cart-items {
      padding-bottom: 260px;
    }
  }

  /* üçé IOS SAFE AREA */
  @supports (padding: max(0px)) {
    @media screen and (max-width: 989px) {
      .cart-flex__right {
        padding-bottom: max(16px, env(safe-area-inset-bottom));
      }
    }
  }
{%- endstyle -%}

{%- render 'script' with 'cart', defer: true -%}
{%- render 'script' with 'cart-modules', defer: true -%}

{% liquid
  assign protection_active = false
  assign protection_index = 0
  assign protection_product = null
  assign upsell_settings = null
  for block in section.blocks
    case block.type
      when 'guarantee'
        assign protection_product = block.settings.cart_protection_product
      when 'upsell'
        assign upsell_settings = block.settings
    endcase
  endfor
  for item in cart.items
    if item.product_id == protection_product.id
      assign protection_active = true
      assign protection_index = forloop.index
    endif
  endfor
%}

<cart-items class="container container--normal section-{{ section.id }}-padding">
  <div class="heading__section title-wrapper-with-link">
    <h1 class="heading heading__style--{{ section.settings.heading_style }}">{{ 'sections.cart.title' | t }}</h1>
    {%- if cart.empty? -%}
      <a href="{{ settings.cart_empty_url | default: routes.all_products_collection_url }}" class="underlined-link">
        {{- 'general.continue_shopping' | t -}}
      </a>
    {%- endif -%}
  </div>

  <div class="cart__warnings">
    <h1 class="cart__empty-text">{{ 'sections.cart.empty' | t }}</h1>
    <a href="{{ routes.all_products_collection_url }}" class="button">
      {{ 'general.continue_shopping' | t }}
    </a>

    {%- if shop.customer_accounts_enabled and customer == null -%}
      <h2 class="cart__login-title">{{ 'sections.cart.login.title' | t }}</h2>
      <p class="cart__login-paragraph">
        {{ 'sections.cart.login.paragraph_html' | t: link: routes.account_login_url }}
      </p>
    {%- endif -%}
  </div>

  <div class="cart__contents critical-hidden cart-page-container">
    <div class="cart__items" id="main-cart-items" data-id="{{ section.id }}">
      <div class="js-contents">
        {%- if cart != empty -%}
          <div class="cart-wrapper">
            <div class="cart-items">
              {% for block in section.blocks %}
                {% if block.type == 'timer' %}
                  <div
                    class="text-{{ section.settings.cart_modules_alignment }} color-{{ block.settings.cart_module_timer_palette }} drawer__module--timer"
                    data-duration="{{ block.settings.timer_delay }}"
                  >
                    {%- assign timer = "<span class='drawer__module--timer-time'></span>" -%}
                    <p class="timer__text">
                      {{- block.settings.cart_module_timer_text | replace: '$time', timer -}}
                    </p>
                  </div>
                {% endif %}
              {% endfor %}

              {%- for item in cart.items -%}
                <div class="cart-item {% if item.product_id == settings.cart_protection_product.id %} cart-item--hidden{% endif %}" id="CartItem-{{ item.index | plus: 1 }}">
                  <div class="cart-item__media">
                    {% if item.image %}
                      {% comment %} Leave empty space due to a:empty CSS display: none rule {% endcomment %}
                      <a href="{{ item.url }}" class="cart-item__link" aria-hidden="true" tabindex="-1"> </a>
                      <div class="cart-item__image-container gradient global-media-settings">
                        <img
                          src="{{ item.image | image_url: width: 300 }}"
                          class="cart-item__image"
                          alt="{{ item.image.alt | escape }}"
                          loading="lazy"
                          width="150"
                          height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}"
                        >
                      </div>
                    {% endif %}
                  </div>

                  <div class="cart-item__details">
                    {%- if settings.show_vendor -%}
                      <p class="caption-with-letter-spacing">{{ item.product.vendor }}</p>
                    {%- endif -%}

                    <a href="{{ item.url }}" class="cart-item__name h4 break">{{ item.product.title | escape }}</a>

                    {%- unless settings.hide_unit_price_in_cart -%}
                      {%- if item.original_price != item.final_price -%}
                        <div class="cart-item__discounted-prices">
                          <span class="visually-hidden">
                            {{ 'products.product.price.regular_price' | t }}
                          </span>
                          <s class="cart-item__old-price product-option">
                            {{- item.original_price | money -}}
                          </s>
                          <span class="visually-hidden">
                            {{ 'products.product.price.sale_price' | t }}
                          </span>
                          <strong class="cart-item__final-price product-option">
                            {{ item.final_price | money }}
                          </strong>
                        </div>
                      {%- else -%}
                        <div class="product-option">
                          {{ item.original_price | money }}
                        </div>
                      {%- endif -%}
                    {%- endunless -%}

                    {%- if item.product.has_only_default_variant == false
                      or item.properties.size != 0
                      or item.selling_plan_allocation != null
                    -%}
                      <dl>
                        {%- if item.product.has_only_default_variant == false -%}
                          {%- for option in item.options_with_values -%}
                            <span class="product-option">
                              {{ option.value -}}
                              {%- unless forloop.last %} / {% endunless %}
                            </span>
                          {%- endfor -%}
                        {%- endif -%}

                        {%- for property in item.properties -%}
                          {%- assign property_first_char = property.first | slice: 0 -%}
                          {%- if property.last != blank and property_first_char != '_' -%}
                            <div class="product-option">
                              <dt>{{ property.first }}:</dt>
                              <dd>
                                {%- if property.last contains '/uploads/' -%}
                                  <a href="{{ property.last }}" class="link" target="_blank">
                                    {{ property.last | split: '/' | last }}
                                  </a>
                                {%- else -%}
                                  {{ property.last }}
                                {%- endif -%}
                              </dd>
                            </div>
                          {%- endif -%}
                        {%- endfor -%}
                      </dl>

                      <p class="product-option">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                    {%- endif -%}

                    <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                      {%- for discount in item.discounts -%}
                        <li class="discounts__discount">
                          {%- render 'icon-discount' -%}
                          {{ discount.title }}
                        </li>
                      {%- endfor -%}
                    </ul>
                  </div>

                  <div class="cart-item-right__part">
                    <div class="cart-item__totals right medium-hide large-up-hide">
                      <div class="loading-overlay hidden">
                        <div class="loading-overlay__spinner">
                          <svg
                            aria-hidden="true"
                            focusable="false"
                            class="spinner"
                            viewBox="0 0 66 66"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                          </svg>
                        </div>
                      </div>
                      <div class="cart-item__price-wrapper">
                        {%- if item.original_line_price != item.final_line_price -%}
                          <dl class="cart-item__discounted-prices">
                            <dt class="visually-hidden">
                              {{ 'products.product.price.regular_price' | t }}
                            </dt>
                            <dd>
                              <s class="cart-item__old-price price price--end">
                                {{ item.original_line_price | money }}
                              </s>
                            </dd>
                            <dt class="visually-hidden">
                              {{ 'products.product.price.sale_price' | t }}
                            </dt>
                            <dd class="price price--end">
                              {{ item.final_line_price | money }}
                            </dd>
                          </dl>
                        {%- else -%}
                          <span class="price price--end">
                            {{ item.original_line_price | money }}
                          </span>
                        {%- endif -%}

                        {%- if item.variant.available and item.unit_price_measurement -%}
                          <div class="unit-price caption">
                            <span class="visually-hidden">{{ 'products.product.price.unit_price' | t }}</span>
                            {{ item.variant.unit_price | money }}
                            <span aria-hidden="true">/</span>
                            <span class="visually-hidden"
                              >&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span
                            >
                            {%- if item.variant.unit_price_measurement.reference_value != 1 -%}
                              {{- item.variant.unit_price_measurement.reference_value -}}
                            {%- endif -%}
                            {{ item.variant.unit_price_measurement.reference_unit }}
                          </div>
                        {%- endif -%}
                      </div>
                    </div>

                    <div class="cart-item__quantity">
                      <div class="cart-item__quantity-wrapper">
                        <label class="visually-hidden" for="Quantity-{{ item.index | plus: 1 }}">
                          {{ 'products.product.quantity.label' | t }}
                        </label>
                        <quantity-input
                          class="
                            product__quantity product__quantity-hover--{{ settings.hover_effect }}
                            product__quantity--{{ settings.secondary_background_border }}
                            {%- if settings.remove_spacing %} product__quantity--super-glue {% endif -%}
                            {%- if settings.secondary_background_buttons %}
                              product__quantity--buttons-secondary
                              {% unless settings.secondary_background_input %} alone{% else %} both_background{% endunless %}
                            {% else %}
                              {% unless settings.secondary_background_input %} no_background {% endunless %}
                            {% endif -%}
                          "
                        >
                          <button class="quantity__button no-js-hidden" name="minus" type="button">
                            <span class="visually-hidden">
                              {{- 'products.product.quantity.decrease' | t: product: item.product.title | escape -}}
                            </span>
                            {% render 'icon-minus' %}
                          </button>
                          <input
                            class="quantity__input"
                            data-quantity-variant-id="{{ item.variant.id }}"
                            type="number"
                            name="updates[]"
                            value="{{ item.quantity }}"
                            {% # theme-check-disable %}
                            data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
                            min="{{ item.variant.quantity_rule.min }}"
                            {% if item.variant.quantity_rule.max != null %}
                              max="{{ item.variant.quantity_rule.max }}"
                            {% endif %}
                            step="{{ item.variant.quantity_rule.increment }}"
                            {% # theme-check-enable %}
                            aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"
                            id="Quantity-{{ item.index | plus: 1 }}"
                            data-index="{{ item.index | plus: 1 }}"
                            form="cart"
                          >
                          <button class="quantity__button no-js-hidden" name="plus" type="button">
                            <span class="visually-hidden">
                              {{- 'products.product.quantity.increase' | t: product: item.product.title | escape -}}
                            </span>
                            {% render 'icon-plus' %}
                          </button>
                        </quantity-input>

                        <cart-remove-button
                          id="Remove-{{ item.index | plus: 1 }}"
                          data-index="{{ item.index | plus: 1 }}"
                        >
                          {% liquid
                            if item.product_id == settings.cart_protection_product.id
                              assign protection_index = forloop.index
                            endif
                          %}
                          <a
                            href="{{ item.url_to_remove }}"
                            class="button button--tertiary"
                            aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}"
                          >
                            {% render 'icon-remove' %}
                          </a>
                        </cart-remove-button>
                      </div>
                      <div class="cart-item__error" id="Line-item-error-{{ item.index | plus: 1 }}" role="alert">
                        <small class="cart-item__error-text"></small>
                        <svg
                          aria-hidden="true"
                          focusable="false"
                          class="icon icon-error"
                          viewBox="0 0 13 13"
                        >
                          <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                          <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                          <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                          <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7">
                        </svg>
                      </div>
                    </div>

                    <div class="cart-item__totals right small-hide">
                      <div class="loading-overlay hidden">
                        <div class="loading-overlay__spinner">
                          <svg
                            aria-hidden="true"
                            focusable="false"
                            class="spinner"
                            viewBox="0 0 66 66"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                          </svg>
                        </div>
                      </div>

                      <div class="cart-item__price-wrapper">
                        {%- if item.original_line_price != item.final_line_price -%}
                          <dl class="cart-item__discounted-prices">
                            <dt class="visually-hidden">
                              {{ 'products.product.price.regular_price' | t }}
                            </dt>
                            <dd>
                              <s class="cart-item__old-price price price--end">
                                {{ item.original_line_price | money }}
                              </s>
                            </dd>
                            <dt class="visually-hidden">
                              {{ 'products.product.price.sale_price' | t }}
                            </dt>
                            <dd class="price price--end">
                              {{ item.final_line_price | money }}
                            </dd>
                          </dl>
                        {%- else -%}
                          <span class="price price--end">
                            {{ item.original_line_price | money }}
                          </span>
                        {%- endif -%}

                        {%- if item.variant.available and item.unit_price_measurement -%}
                          <div class="unit-price caption">
                            <span class="visually-hidden">{{ 'products.product.price.unit_price' | t }}</span>
                            {{ item.variant.unit_price | money }}
                            <span aria-hidden="true">/</span>
                            <span class="visually-hidden"
                              >&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span
                            >
                            {%- if item.variant.unit_price_measurement.reference_value != 1 -%}
                              {{- item.variant.unit_price_measurement.reference_value -}}
                            {%- endif -%}
                            {{ item.variant.unit_price_measurement.reference_unit }}
                          </div>
                        {%- endif -%}
                      </div>
                    </div>
                  </div>
                </div>
              {%- endfor -%}

              {%- # region(collapsed) Cart Upsell -%}
              {%- if upsell_settings != blank -%}
                <div class="cart__upsell color-{{ upsell_settings.cart_module_upsell_palette }} cart__upsell--{{ upsell_settings.cart_upsell_style }}">
                  {%- if upsell_settings.cart_upsell_title -%}
                    {%- if upsell_settings.cart_upsell_collection != blank or upsell_settings.cart_upsell_product != blank -%}
                      <p class="cart__upsell--title">{{ upsell_settings.cart_upsell_title }}</p>
                    {%- endif -%}
                  {%- endif -%}
                                      {%- if upsell_settings.cart_upsell_style == 'collection' and upsell_settings.cart_upsell_collection != blank -%}
                    {%- assign collection = upsell_settings.cart_upsell_collection -%}
                    <div id="cart-upsell__swiper" class="swiper cart__upsell--swiper">
                      <div class="swiper-wrapper">
                        {%- for product in collection.products -%}
                          <div class="swiper-slide">
                            {%- render 'card-product-upsell-drawer',
                              section_id: section.id,
                              card_product: product,
                              card_style: settings.product_card_style,
                              button_text: upsell_settings.cart_upsell_button_text,
                              button_style: upsell_settings.cart_upsell_button_style
                            -%}
                          </div>
                        {%- endfor -%}
                      </div>
                    </div>
                  {%- elsif upsell_settings.cart_upsell_style == 'product' and upsell_settings.cart_upsell_product != blank -%}
                    {%- assign card_product = upsell_settings.cart_upsell_product -%}
                    <div class="cart__upsell--swiper">
                      <a href="{{ card_product.url }}" class="cart__upsell--link--media">
                        <div class="cart__upsell--image global-media-settings media media--image">
                          {% comment %}theme-check-disable ImgLazyLoading{% endcomment %}
                          <img
                            srcset="
                              {%- if card_product.featured_media.width >= 165 -%}{{ card_product.featured_media | image_url: width: 165 }} 165w,{%- endif -%}
                              {%- if card_product.featured_media.width >= 360 -%}{{ card_product.featured_media | image_url: width: 360 }} 360w,{%- endif -%}
                              {%- if card_product.featured_media.width >= 533 -%}{{ card_product.featured_media | image_url: width: 533 }} 533w,{%- endif -%}
                              {%- if card_product.featured_media.width >= 720 -%}{{ card_product.featured_media | image_url: width: 720 }} 720w,{%- endif -%}
                              {%- if card_product.featured_media.width >= 940 -%}{{ card_product.featured_media | image_url: width: 940 }} 940w,{%- endif -%}
                              {%- if card_product.featured_media.width >= 1066 -%}{{ card_product.featured_media | image_url: width: 1066 }} 1066w,{%- endif -%}
                              {{ card_product.featured_media | image_url }} {{ card_product.featured_media.width }}w
                            "
                            src="{{ card_product.featured_media | image_url: width: 533 }}"
                            sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
                            alt="{{ card_product.featured_media.alt | escape }}"
                            class="motion-reduce"
                            {% unless lazy_load == false %}
                              loading="lazy"
                            {% endunless %}
                            width="75"
                            height="{{ 75 | divided_by: item.image.aspect_ratio | ceil }}"
                          >
                          {% comment %}theme-check-enable ImgLazyLoading{% endcomment %}
                        </div>
                      </a>
                      <div class="cart__upsell--product-informations">
                        <h3 class="card__product-heading heading--2-lines">
                          {{ card_product.title }}
                        </h3>
                        {% render 'price',
                          product: card_product,
                          use_variant: true,
                          price_class: priceClass,
                          formatting: formatting,
                          price_color: settings.card_product_price_color
                        %}
                      </div>
                      <div class="card__product-cta">
                        {%- render 'script' with 'product-form', defer: true -%}
                        <product-form class="product-form">
                          <div class="product-form__error-message-wrapper" role="alert" hidden>
                            <svg aria-hidden="true" focusable="false" class="icon icon-error" viewBox="0 0 13 13">
                              <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                              <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                              <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                              <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7">
                            </svg>
                            <span class="product-form__error-message"></span>
                          </div>
                          <form
                            method="post"
                            action="/cart/add"
                            id="product-form-{{ section.id }}-{{ card_product.id }}"
                            accept-charset="UTF-8"
                            class="form card__product-form cart__upsell--single"
                            enctype="multipart/form-data"
                            novalidate="novalidate"
                            data-type="add-to-cart-form"
                          >
                            <input type="hidden" name="form_type" value="product">
                            <input type="hidden" name="utf8" value="‚úì">
                            {%- unless card_product.has_only_default_variant -%}
                              <div class="select">
                                <select class="select__select product-variant-id" name="id">
                                  {%- for variant in card_product.variants -%}
                                    {%- if variant.available -%}
                                      <option value="{{ variant.id }}">{{ variant.title | escape -}}</option>
                                    {%- endif -%}
                                  {%- endfor -%}
                                </select>
                                {% render 'icon-caret' %}
                              </div>
                            {%- else -%}
                              <input
                                type="hidden"
                                name="id"
                                value="{{ card_product.variants[0].id }}"
                                class="product-variant-id"
                              >
                            {%- endunless -%}
                            <div class="product-form__buttons card__product-form-buttons">
                              <button
                                id="ProductSubmitButton-{{ section.id }}-{{ card_product.id }}"
                                type="submit"
                                name="add"
                                class="product-form__submit button button__style--{{ upsell_settings.cart_upsell_button_style }}"
                              >
                                <span>
                                  {{- upsell_settings.cart_upsell_button_text }}
                                </span>
                                <div class="loading-overlay__spinner hidden">
                                  <svg
                                    aria-hidden="true"
                                    focusable="false"
                                    class="spinner"
                                    viewBox="0 0 66 66"
                                    xmlns="http://www.w3.org/2000/svg"
                                  >
                                    <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                                  </svg>
                                </div>
                              </button>
                            </div>
                          </form>
                        </product-form>
                      </div>
                    </div>
                  {%- endif -%}
                </div>
            {%- endif -%}
            {%- # endregion -%}

            </div>
                            
            <div class="cart-flex__right" data-cart-totals-container>
              {% for block in section.blocks %}
                {% if block.type == 'delivery_estimation' %}
                  <div class="drawer__module--delivery-estimation">
                    {%- render 'block-delivery-estimation', block: block -%}
                  </div>
                {% endif %}
              {% endfor %}
              
              <div class="cart-modules content-container">
                {% for block in section.blocks %}
                  {% case block.type %}
                    {%- when '@app' -%}
                      {% render block %}
    
                    {% when 'code' %}
                      <div class="cart__discount-code color-{{ block.settings.cart_module_code_palette }}">
                        <input
                          form="cart"
                          type="text"
                          id="cartPageDiscountCode"
                          placeholder="{{ block.settings.cart_module_code_placeholder }}"
                        >
                        <div
                          class="button button__style--{{ block.settings.cart_module_code_button_style }} cartDiscountCodeButton"
                          data-input="cartPageDiscountCode"
                        >
                          {{ block.settings.cart_module_code_button_text | escape }}
                        </div>
                      </div>
    
                    {% when 'free_shipping' %}
                      <div
                        class="drawer__module text-{{ section.settings.cart_modules_alignment }} color-{{ block.settings.cart_module_free_shipping_palette }} drawer__module--free_shipping"
                        data-target="{{ block.settings.cart_module_free_shipping_min_price }}"
                      >
                        {%- assign leftAmount = "<span class='free-shipping__amount' data-total-price='"
                          | append: cart.total_price
                          | append: "'></span>"
                        -%}
                        <p class="free-shipping__left-amount">
                          {{- block.settings.cart_module_free_shipping_text_before | replace: '$amount', leftAmount -}}
                        </p>
                        <p class="free-shipping__success hidden">{{- block.settings.cart_module_free_shipping_text_after -}}</p>
                        <div class="free-shipping__bar">
                          <div class="free-shipping__drag"></div>
                        </div>
                      </div>
    
                    {% when 'trust' %}
                      <div class="drawer__module text-{{ section.settings.cart_modules_alignment }} color-{{ block.settings.cart_module_trust_palette }} drawer__module--trust">
                          <div
                            {%- if block.settings.cart_module_trust_style == 'slider' %}
                              id="drawer-trust__swiper"
                            {% endif %}
                            class="{% if block.settings.cart_module_trust_style == 'slider' %}swiper swiper_no_pagination {% else %}bullets bullets__alignement--{{ section.settings.cart_modules_alignment }} {% endif %}drawer-trust__swiper"
                          >
                            <div class="swiper-wrapper">
                              <div class="swiper-slide drawer-trust__slide">
                                {%- if settings.icon_1_custom_icon != blank -%}
                                  <img
                                    src="{{ settings.icon_1_custom_icon | image_url }}"
                                    loading="lazy"
                                    width="{{ block.settings.cart_module_trust_size }}"
                                    height="{{ block.settings.cart_module_trust_size }}"
                                    class="icon__icon icon__custom-icon"
                                  >
                                {%- else -%}
                                  {% render 'icons', icon: settings.icon_1_icon %}
                                {%- endif -%}
                                <p class="icon__text">
                                  {{ settings.icon_1_text }}
                                </p>
                              </div>
                              <div class="swiper-slide drawer-trust__slide">
                                {%- if settings.icon_2_custom_icon != blank -%}
                                  <img
                                    src="{{ settings.icon_2_custom_icon | image_url }}"
                                    loading="lazy"
                                    width="{{ block.settings.cart_module_trust_size }}"
                                    height="{{ block.settings.cart_module_trust_size }}"
                                    class="icon__icon icon__custom-icon"
                                  >
                                {%- else -%}
                                  {% render 'icons', icon: settings.icon_2_icon %}
                                {%- endif -%}
                                <p class="icon__text">
                                  {{ settings.icon_2_text }}
                                </p>
                              </div>
                              <div class="swiper-slide drawer-trust__slide">
                                {%- if settings.icon_3_custom_icon != blank -%}
                                  <img
                                    src="{{ settings.icon_3_custom_icon | image_url }}"
                                    loading="lazy"
                                    width="{{ block.settings.cart_module_trust_size }}"
                                    height="{{ block.settings.cart_module_trust_size }}"
                                    class="icon__icon icon__custom-icon"
                                  >
                                {%- else -%}
                                  {% render 'icons', icon: settings.icon_3_icon %}
                                {%- endif -%}
                                <p class="icon__text">
                                  {{ settings.icon_3_text }}
                                </p>
                              </div>
                              <div class="swiper-slide drawer-trust__slide">
                                {%- if settings.icon_4_custom_icon != blank -%}
                                  <img
                                    src="{{ settings.icon_4_custom_icon | image_url }}"
                                    loading="lazy"
                                    width="{{ block.settings.cart_module_trust_size }}"
                                    height="{{ block.settings.cart_module_trust_size }}"
                                    class="icon__icon icon__custom-icon"
                                  >
                                {%- else -%}
                                  {% render 'icons', icon: settings.icon_4_icon %}
                                {%- endif -%}
                                <p class="icon__text">
                                  {{ settings.icon_4_text }}
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>

                    {%- when 'guarantee' -%}
                      {%- if block.settings.cart_protection_product != blank -%}
                        <div class="drawer__protection drawer__upsell color-{{ block.settings.cart_module_protection_palette }}">
                          {%- render 'card-product-protection-drawer',
                            section_id: section.id,
                            card_product: block.settings.cart_protection_product,
                            card_style: settings.product_card_style,
                            active: protection_active,
                            protection_index: protection_index
                          -%}
                        </div>
                      {%- endif -%}
                  {% endcase %}
                {% endfor %}
    
                {%- if settings.show_cart_note -%}
                  <cart-note class="cart__note field">
                    <label for="Cart-note">{{ 'sections.cart.note' | t }}</label>
                    <textarea
                      class="text-area field__input"
                      name="note"
                      form="cart"
                      id="Cart-note"
                      placeholder="{{ 'sections.cart.note' | t }}"
                    >{{ cart.note }}</textarea>
                  </cart-note>
                {%- endif -%}
    
                {%- liquid
                  assign total_cart_item_price = 0
                  assign total_cart_compare_price = 0
                  assign savings = 0
                  for item in cart.items
                    assign total_cart_item_price = total_cart_item_price | plus: item.price
                    assign compare_price = item.variant.compare_at_price | times: item.quantity
                    assign total_cart_compare_price = total_cart_compare_price | plus: compare_price
                    unless item.variant.compare_at_price >= item.variant.price
                      assign normal_price = item.variant.price | times: item.quantity
                      assign total_cart_compare_price = total_cart_compare_price | plus: normal_price
                    endunless
                    if item.line_level_discount_allocations != blank
                      for discount_allocation in item.line_level_discount_allocations
                        assign savings = savings | plus: discount_allocation.amount
                      endfor
                    endif
                    if item.variant.compare_at_price > item.variant.price
                      assign difference = item.variant.compare_at_price | minus: item.variant.price
                      assign diffSaving = difference | times: item.quantity
                      assign savings = savings | plus: diffSaving
                    endif
                  endfor
                -%}
    
                <div class="js-contents" {{ block.shopify_attributes }}>
                  {%- if section.settings.cart_subtotal_text != blank -%}
                    <div class="totals subtotal" role="status">
                      <h2 class="totals__subtotal totals__little">{{ section.settings.cart_subtotal_text }}</h2>
                      <p class="totals__subtotal-value drawer__subtotal--amount">
                        {{ cart.total_price | plus: savings | money_with_currency }}
                      </p>
                    </div>
                  {%- endif -%}
                  {%- if section.settings.cart_savings_text != blank -%}
                    <div class="totals savings" role="status">
                      <h2 class="totals__subtotal totals__little">{{ section.settings.cart_savings_text }}</h2>
                      <p class="totals__subtotal-value drawer__savings--amount">
                        {{ savings | money_with_currency }}
                      </p>
                    </div>
                  {%- endif -%}
                  <div class="totals">
                    <h2 class="totals__subtotal">{{ section.settings.cart_total_text | default: 'Total' }}</h2>
                    <p class="totals__subtotal-value">{{ cart.total_price | money_with_currency }}</p>
                  </div>
    
                  <div>
                    {%- if cart.cart_level_discount_applications.size > 0 -%}
                      <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                        {%- for discount in cart.cart_level_discount_applications -%}
                          <li class="discounts__discount discounts__discount--position">
                            {%- render 'icon-discount' -%}
                            {{ discount.title }}
                            (-{{ discount.total_allocated_amount | money }})
                          </li>
                        {%- endfor -%}
                      </ul>
                    {%- endif -%}
                  </div>
    
                  {%- if section.settings.cart_footer_text != blank -%}
                    <small class="tax-note caption-large rte">
                      {{ section.settings.cart_footer_text }}
                    </small>
                  {%- endif -%}
                </div>
    
                <div id="cart-errors"></div>
    
                <form action="{{ routes.cart_url }}" method="post" id="cart" class="cart__ctas" {{ block.shopify_attributes }}>
    
                  <button
                    type="submit"
                    id="checkout"
                    class="cart__checkout-button button button__style--{{ section.settings.cart_button_style }}"
                    name="checkout"
                    {% if cart == empty %}
                      disabled
                    {% endif %}
                    form="cart"
                  >
                    {{ section.settings.cart_button_text | default: 'Check out' }}
                  </button>
                </form>
    
                {%- if additional_checkout_buttons and section.settings.additional_checkout_buttons -%}
                  <div class="cart__dynamic-checkout-buttons additional-checkout-buttons">
                    {{ content_for_additional_checkout_buttons }}
                  </div>
                {%- endif -%}

                {%- if section.settings.cart_footer_payment_badges -%}
                  <div class="tax-note__payment-badges">
                    {% for type in shop.enabled_payment_types -%}
                      {{ type | payment_type_svg_tag }}
                    {% endfor %}
                  </div>
                {%- endif -%}

                {%- if section.settings.cart_footer_image != blank -%}
                  <div class="cart__footer-image">
                    <img
                      srcset="
                        {%- if section.settings.cart_footer_image.width >= 165 -%}{{ section.settings.cart_footer_image | image_url: width: 165 }} 165w,{%- endif -%}
                        {%- if section.settings.cart_footer_image.width >= 360 -%}{{ section.settings.cart_footer_image | image_url: width: 360 }} 360w,{%- endif -%}
                        {%- if section.settings.cart_footer_image.width >= 533 -%}{{ section.settings.cart_footer_image | image_url: width: 533 }} 533w,{%- endif -%}
                        {{ section.settings.cart_footer_image | image_url }} {{ section.settings.cart_footer_image.width }}w
                      "
                      src="{{ section.settings.cart_footer_image | image_url: width: 533 }}"
                      alt="{{ section.settings.cart_footer_image.alt | escape }}"
                      loading="lazy"
                      width="533"
                      height="{{ 533 | divided_by: section.settings.cart_footer_image.aspect_ratio | round }}"
                    >
                  </div>
                {%- endif -%}

                {% for block in section.blocks %}
                  {% if block.type == 'review' %}
                    <div class="product__review">
                      {%- assign unique = section.id | remove: '-' -%}
                      {%- render 'block-review', block: block, unique: unique -%}
                    </div>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          </div>
        {%- endif -%}
      </div>
    </div>

    <p class="visually-hidden" id="cart-live-region-text" aria-live="polite" role="status"></p>
    <p class="visually-hidden" id="shopping-cart-line-item-status" aria-live="polite" aria-hidden="true" role="status">
      {{ 'accessibility.loading' | t }}
    </p>
  </div>
</cart-items>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const cartTotalsContainer = document.querySelector('[data-cart-totals-container]');
  const cartItemsContainer = document.querySelector('.cart-items');
  let lastScrollTop = 0;
  let ticking = false;

  if (!cartTotalsContainer) return;

  // V√©rifier si on est sur mobile
  function isMobile() {
    return window.innerWidth <= 989;
  }

  // G√©rer l'affichage des totaux sur mobile
  function handleMobileTotals() {
    if (!isMobile()) {
      cartTotalsContainer.classList.remove('hidden');
      return;
    }

    if (cartItemsContainer) {
      const scrollTop = cartItemsContainer.scrollTop || document.documentElement.scrollTop;
      const scrollHeight = cartItemsContainer.scrollHeight;
      const clientHeight = cartItemsContainer.clientHeight;

      // Si on scroll vers le bas, cacher les totaux
      if (scrollTop > lastScrollTop && scrollTop > 100) {
        cartTotalsContainer.classList.add('hidden');
      } 
      // Si on scroll vers le haut ou qu'on est proche du bas, montrer les totaux
      else if (scrollTop < lastScrollTop || scrollHeight - scrollTop - clientHeight < 100) {
        cartTotalsContainer.classList.remove('hidden');
      }

      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    }
  }

  // Debounce pour les √©v√©nements de scroll
  function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }

  // √âcouter le scroll
  if (cartItemsContainer) {
    cartItemsContainer.addEventListener('scroll', debounce(function() {
      if (!ticking) {
        window.requestAnimationFrame(function() {
          handleMobileTotals();
          ticking = false;
        });
        ticking = true;
      }
    }, 100));
  }

  // √âcouter le redimensionnement
  window.addEventListener('resize', debounce(function() {
    if (!isMobile()) {
      cartTotalsContainer.classList.remove('hidden');
    }
  }, 250));

  // G√©rer le clic sur les totaux pour les afficher
  cartTotalsContainer.addEventListener('click', function(e) {
    if (isMobile() && cartTotalsContainer.classList.contains('hidden')) {
      cartTotalsContainer.classList.remove('hidden');
      e.preventDefault();
    }
  });

  // Initialiser l'√©tat
  handleMobileTotals();
});
</script>

{% schema %}
{
  "name": "t:sections.main-cart-items.name",
  "settings": [
    {
      "type": "select",
      "id": "heading_style",
      "options": [
        {
          "value": "1",
          "label": "t:sections.global.style.options.1"
        },
        {
          "value": "2",
          "label": "t:sections.global.style.options.2"
        },
        {
          "value": "3",
          "label": "t:sections.global.style.options.3"
        }
      ],
      "default": "1",
      "label": "t:sections.global.style.heading"
    },
    {
      "type": "checkbox",
      "id": "additional_checkout_buttons",
      "label": "t:settings_schema.global.settings.additional_checkout_buttons.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:settings_schema.cart.settings.headers.modules.general"
    },
    {
      "type": "select",
      "id": "cart_modules_border",
      "options": [
        {
          "value": "none",
          "label": "t:settings_schema.global.settings.borders.options.none"
        },
        {
          "value": "border--1",
          "label": "t:settings_schema.global.settings.borders.options.1"
        },
        {
          "value": "border--2",
          "label": "t:settings_schema.global.settings.borders.options.2"
        },
        {
          "value": "border--3",
          "label": "t:settings_schema.global.settings.borders.options.3"
        }
      ],
      "default": "border--1",
      "label": "t:settings_schema.global.settings.borders.label"
    },
    {
      "type": "select",
      "id": "cart_modules_alignment",
      "options": [
        {
          "value": "left",
          "label": "t:sections.image-with-text.settings.desktop_content_alignment.options__1.label"
        },
        {
          "value": "center",
          "label": "t:sections.image-with-text.settings.desktop_content_alignment.options__2.label"
        },
        {
          "value": "right",
          "label": "t:sections.image-with-text.settings.desktop_content_alignment.options__3.label"
        }
      ],
      "default": "left",
      "label": "t:sections.image-with-text.settings.desktop_content_alignment.label"
    },
    {
      "type": "header",
      "content": "t:settings_schema.cart.settings.headers.totals"
    },
    {
      "type": "text",
      "id": "cart_savings_text",
      "label": "t:settings_schema.cart.settings.savings_text.label"
    },
    {
      "type": "text",
      "id": "cart_subtotal_text",
      "label": "t:settings_schema.cart.settings.subtotal_text.label"
    },
    {
      "type": "text",
      "id": "cart_total_text",
      "label": "t:settings_schema.cart.settings.total_text.label"
    },
    {
      "type": "text",
      "id": "cart_button_text",
      "label": "t:settings_schema.cart.settings.button_text.label"
    },
    {
      "type": "select",
      "id": "cart_button_style",
      "options": [
        {
          "value": "1",
          "label": "t:settings_schema.global.settings.button_style.options.1"
        },
        {
          "value": "2",
          "label": "t:settings_schema.global.settings.button_style.options.2"
        },
        {
          "value": "3",
          "label": "t:settings_schema.global.settings.button_style.options.3"
        }
      ],
      "default": "1",
      "label": "t:settings_schema.global.settings.button_style.label"
    },
    {
      "type": "header",
      "content": "t:settings_schema.cart.settings.headers.footer"
    },
    {
      "type": "inline_richtext",
      "id": "cart_footer_text",
      "label": "t:settings_schema.cart.settings.footer_text.label"
    },
    {
      "type": "checkbox",
      "id": "cart_footer_payment_badges",
      "label": "t:settings_schema.cart.settings.footer_payment_badges.label"
    },
    {
      "type": "image_picker",
      "id": "cart_footer_image",
      "label": "t:settings_schema.cart.settings.footer_image.label",
      "info": "t:settings_schema.cart.settings.footer_image.info"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.global.padding_top.label",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.global.padding_bottom.label",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_top_sm",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.global.padding_top_sm.label",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_sm",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.global.padding_bottom_sm.label",
      "default": 32
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "timer",
      "name": "t:settings_schema.cart.settings.headers.modules.timer",
      "settings": [
        {
          "type": "header",
          "content": "Timer"
        },
        {
          "type": "inline_richtext",
          "id": "cart_module_timer_text",
          "label": "t:settings_schema.cart.settings.timer_text.label",
          "info": "t:settings_schema.cart.settings.timer_text.info",
          "default": "Cart reserved for $time"
        },
        {
          "type": "range",
          "id": "timer_delay",
          "min": 1,
          "max": 60,
          "step": 1,
          "unit": "min",
          "label": "t:settings_schema.cart.settings.timer_delay.label",
          "default": 10
        }
      ]
    },
    {
      "type": "free_shipping",
      "name": "t:settings_schema.cart.settings.headers.modules.free_shipping",
      "settings": [
        {
          "type": "header",
          "content": "Livraison gratuite"
        },
        {
          "type": "color_scheme",
          "id": "cart_module_free_shipping_palette",
          "default": "background",
          "label": "t:sections.global.colors_palette.label"
        },
        {
          "type": "text",
          "id": "cart_module_free_shipping_text_before",
          "label": "t:settings_schema.cart.settings.free_shipping_text_before.label",
          "default": "Only $amount to get free shipping"
        },
        {
          "type": "text",
          "id": "cart_module_free_shipping_text_after",
          "label": "t:settings_schema.cart.settings.free_shipping_text_after.label",
          "default": "You get free shipping!"
        },
        {
          "type": "text",
          "id": "cart_module_free_shipping_min_price",
          "label": "t:settings_schema.cart.settings.free_shipping_min_price.label",
          "default": "60"
        }
      ]
    },
    {
      "type": "trust",
      "name": "t:settings_schema.cart.settings.headers.modules.trust",
      "settings": [
        {
          "type": "header",
          "content": "Trust"
        },
        {
          "type": "select",
          "id": "cart_module_trust_style",
          "options": [
            {
              "value": "slider",
              "label": "t:settings_schema.cart.settings.trust_style.options.slider"
            },
            {
              "value": "bullet_points",
              "label": "t:settings_schema.cart.settings.trust_style.options.bullet_points"
            }
          ],
          "default": "slider",
          "label": "t:settings_schema.cart.settings.trust_style.label"
        },
        {
          "type": "range",
          "id": "cart_module_trust_size",
          "min": 20,
          "max": 50,
          "step": 5,
          "unit": "px",
          "default": 20,
          "label": "t:settings_schema.cart.settings.trust_size"
        },
        {
          "type": "color_scheme",
          "id": "cart_module_trust_palette",
          "default": "background",
          "label": "t:sections.global.colors_palette.label"
        }
      ]
    },
    {
      "type": "code",
      "name": "t:settings_schema.cart.settings.headers.modules.code",
      "settings": [
        {
          "type": "header",
          "content": "Code promo"
        },
        {
          "type": "color_scheme",
          "id": "cart_module_code_palette",
          "default": "background",
          "label": "t:sections.global.colors_palette.label"
        },
        {
          "type": "text",
          "id": "cart_module_code_placeholder",
          "label": "t:settings_schema.cart.settings.placeholder_discount.label",
          "default": "Discount code"
        },
        {
          "type": "text",
          "id": "cart_module_code_button_text",
          "label": "t:sections.global.button_text.label",
          "default": "Apply"
        },
        {
          "type": "select",
          "id": "cart_module_code_button_style",
          "options": [
            {
              "value": "1",
              "label": "t:settings_schema.global.settings.button_style.options.1"
            },
            {
              "value": "2",
              "label": "t:settings_schema.global.settings.button_style.options.2"
            },
            {
              "value": "3",
              "label": "t:settings_schema.global.settings.button_style.options.3"
            }
          ],
          "default": "1",
          "label": "t:settings_schema.global.settings.button_style.label"
        }
      ]
    },
    {
      "type": "review",
      "name": "t:sections.product.blocks.review.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "stars_style",
          "options": [
            {
              "value": "mini",
              "label": "t:settings_schema.stars.stars_style.options.mini"
            },
            {
              "value": "full",
              "label": "t:settings_schema.stars.stars_style.options.full"
            },
            {
              "value": "stars",
              "label": "t:settings_schema.stars.stars_style.options.stars"
            }
          ],
          "default": "stars",
          "label": "t:settings_schema.stars.stars_style.label"
        },
        {
          "type": "checkbox",
          "id": "autoplay",
          "label": "t:sections.slideshow.settings.auto_rotate.label",
          "default": true
        },
        {
          "type": "range",
          "id": "speed",
          "min": 3,
          "max": 9,
          "step": 1,
          "unit": "s",
          "label": "t:sections.slideshow.settings.change_slides_speed.label",
          "default": 4
        },
        {
          "type": "header",
          "content": "t:sections.product.blocks.review.header.review1"
        },
        {
          "type": "image_picker",
          "id": "image1",
          "label": "t:sections.product.blocks.review.image"
        },
        {
          "type": "text",
          "id": "heading1",
          "label": "t:sections.product.blocks.review.heading",
          "default": "Name / Username"
        },
        {
          "type": "inline_richtext",
          "id": "text1",
          "label": "t:sections.product.blocks.review.text",
          "default": "Your product helps me so much to reach my goal. I used to struggle a lot before buying your stuff: I totally recommend it!"
        },
        {
          "type": "range",
          "id": "rating1",
          "label": "t:sections.product.blocks.review.rating",
          "default": 5,
          "step": 0.1,
          "min": 0,
          "max": 5,
          "unit": "/5"
        },
        {
          "type": "checkbox",
          "id": "verified1",
          "label": "t:sections.reviews.verified.label",
          "default": true
        },
        {
          "type": "header",
          "content": "t:sections.product.blocks.review.header.review2"
        },
        {
          "type": "image_picker",
          "id": "image2",
          "label": "t:sections.product.blocks.review.image"
        },
        {
          "type": "text",
          "id": "heading2",
          "label": "t:sections.product.blocks.review.heading",
          "default": "Name / Username"
        },
        {
          "type": "inline_richtext",
          "id": "text2",
          "label": "t:sections.product.blocks.review.text",
          "default": "Your product helps me so much to reach my goal. I used to struggle a lot before buying your stuff: I totally recommend it!"
        },
        {
          "type": "range",
          "id": "rating2",
          "label": "t:sections.product.blocks.review.rating",
          "default": 5,
          "step": 0.1,
          "min": 0,
          "max": 5,
          "unit": "/5"
        },
        {
          "type": "checkbox",
          "id": "verified2",
          "label": "t:sections.reviews.verified.label",
          "default": true
        },
        {
          "type": "header",
          "content": "t:sections.product.blocks.review.header.review3"
        },
        {
          "type": "image_picker",
          "id": "image3",
          "label": "t:sections.product.blocks.review.image"
        },
        {
          "type": "text",
          "id": "heading3",
          "label": "t:sections.product.blocks.review.heading",
          "default": "Name / Username"
        },
        {
          "type": "inline_richtext",
          "id": "text3",
          "label": "t:sections.product.blocks.review.text",
          "default": "Your product helps me so much to reach my goal. I used to struggle a lot before buying your stuff: I totally recommend it!"
        },
        {
          "type": "range",
          "id": "rating3",
          "label": "t:sections.product.blocks.review.rating",
          "default": 5,
          "step": 0.1,
          "min": 0,
          "max": 5,
          "unit": "/5"
        },
        {
          "type": "checkbox",
          "id": "verified3",
          "label": "t:sections.reviews.verified.label",
          "default": true
        }
      ]
    },
    {
      "type": "delivery_estimation",
      "name": "t:sections.product.blocks.delivery_estimation.name",
      "settings": [
        {
          "type": "select",
          "id": "icons_color",
          "options": [
            {
              "value": "accent-1",
              "label": "t:sections.global.colors_palette.options.accent_1"
            },
            {
              "value": "accent-2",
              "label": "t:sections.global.colors_palette.options.accent_2"
            },
            {
              "value": "headings",
              "label": "t:sections.global.colors_palette.options.headings"
            },
            {
              "value": "text",
              "label": "t:sections.global.colors_palette.options.text"
            }
          ],
          "default": "accent-1",
          "label": "t:sections.product.blocks.delivery_estimation.color"
        },
        {
          "type": "select",
          "id": "format",
          "options": [
            {
              "value": "dd/MM",
              "label": "dd/MM"
            },
            {
              "value": "MM/dd",
              "label": "MM/dd"
            }
          ],
          "default": "dd/MM",
          "label": "Format"
        },
        {
          "type": "header",
          "content": "t:sections.product.blocks.delivery_estimation.headers.today"
        },
        {
          "type": "image_picker",
          "id": "today_image",
          "label": "t:sections.product.blocks.delivery_estimation.custom_icon"
        },
        {
          "type": "text",
          "id": "today_info",
          "default": "Ordered",
          "label": "t:sections.product.blocks.delivery_estimation.info"
        },
        {
          "type": "header",
          "content": "t:sections.product.blocks.delivery_estimation.headers.ready"
        },
        {
          "type": "image_picker",
          "id": "ready_image",
          "label": "t:sections.product.blocks.delivery_estimation.custom_icon"
        },
        {
          "type": "text",
          "id": "ready_info",
          "default": "Order ready",
          "label": "t:sections.product.blocks.delivery_estimation.info"
        },
        {
          "type": "range",
          "id": "ready",
          "min": 1,
          "max": 100,
          "step": 1,
          "unit": "day",
          "label": "t:sections.product.blocks.delivery_estimation.ready",
          "default": 2
        },
        {
          "type": "header",
          "content": "t:sections.product.blocks.delivery_estimation.headers.delivered"
        },
        {
          "type": "image_picker",
          "id": "delivered_image",
          "label": "t:sections.product.blocks.delivery_estimation.custom_icon"
        },
        {
          "type": "text",
          "id": "delivered_info",
          "default": "Delivered",
          "label": "t:sections.product.blocks.delivery_estimation.info"
        },
        {
          "type": "range",
          "id": "delivered",
          "min": 1,
          "max": 100,
          "step": 1,
          "unit": "day",
          "label": "t:sections.product.blocks.delivery_estimation.delivered",
          "default": 8
        }
      ]
    },
    {
      "type": "guarantee",
      "name": "t:settings_schema.cart.settings.headers.modules.protection",
      "settings": [
        {
          "type": "product",
          "id": "cart_protection_product",
          "label": "t:settings_schema.cart.settings.product_protection.label",
          "info": "t:settings_schema.cart.settings.product_protection.infos"
        },
        {
          "type": "color_scheme",
          "id": "cart_module_protection_palette",
          "default": "background",
          "label": "t:sections.global.colors_palette.label"
        }
      ]
    },
    {
      "type": "upsell",
      "name": "t:settings_schema.cart.settings.headers.upsell",
      "settings": [
        {
          "type": "select",
          "id": "cart_upsell_style",
          "options": [
            {
              "value": "collection",
              "label": "t:settings_schema.cart.settings.upsell_style.options.collection"
            },
            {
              "value": "product",
              "label": "t:settings_schema.cart.settings.upsell_style.options.product"
            }
          ],
          "default": "product",
          "label": "t:settings_schema.cart.settings.upsell_style.label"
        },
        {
          "type": "color_scheme",
          "id": "cart_module_upsell_palette",
          "default": "background",
          "label": "t:sections.global.colors_palette.label"
        },
        {
          "type": "text",
          "id": "cart_upsell_title",
          "default": "You'll love this article",
          "label": "t:settings_schema.cart.settings.upsell_title.label"
        },
        {
          "type": "text",
          "id": "cart_upsell_button_text",
          "default": "Add",
          "label": "t:settings_schema.cart.settings.upsell_button_text.label"
        },
        {
          "type": "select",
          "id": "cart_upsell_button_style",
          "options": [
            {
              "value": "1",
              "label": "t:settings_schema.global.settings.button_style.options.1"
            },
            {
              "value": "2",
              "label": "t:settings_schema.global.settings.button_style.options.2"
            },
            {
              "value": "3",
              "label": "t:settings_schema.global.settings.button_style.options.3"
            }
          ],
          "default": "1",
          "label": "t:settings_schema.global.settings.button_style.label"
        },
        {
          "type": "collection",
          "id": "cart_upsell_collection",
          "label": "t:settings_schema.cart.settings.collection.label"
        },
        {
          "type": "product",
          "id": "cart_upsell_product",
          "label": "t:settings_schema.cart.settings.product.label"
        }
      ]
    }
  ]
}
{% endschema %}